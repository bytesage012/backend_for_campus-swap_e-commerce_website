  console.log
    [dotenv@17.2.3] injecting env (6) from .env -- tip: âœ… audit secrets and track compliance: https://dotenvx.com/ops

      at _log (node_modules/dotenv/lib/main.js:142:11)

  console.log
    [dotenv@17.2.3] injecting env (0) from .env -- tip: ðŸ”‘ add access controls to secrets: https://dotenvx.com/ops

      at _log (node_modules/dotenv/lib/main.js:142:11)

  console.log
    [dotenv@17.2.3] injecting env (0) from .env -- tip: ðŸ” prevent committing .env to code: https://dotenvx.com/precommit

      at _log (node_modules/dotenv/lib/main.js:142:11)

(node:23546) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
  console.log
    [INFO] [2026-01-03T12:50:58.499Z] User Registration Attempt {
      "email": "test@unn.edu.ng"
    }

      at Object.info (src/utils/logger.ts:3:17)

  console.log
    [INFO] [2026-01-03T12:50:58.751Z] User Registered Successfully {
      "userId": "7629e0b9-67af-4c24-b8ca-e6c463b08ee5"
    }

      at Object.info (src/utils/logger.ts:3:17)

  console.error
    [ERROR] [2026-01-03T12:50:58.804Z] Register Controller Error [
      {
        "origin": "string",
        "code": "invalid_format",
        "format": "email",
        "pattern": "/^(?!\\.)(?!.*\\.\\.)([A-Za-z0-9_'+\\-\\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\\-]*\\.)+[A-Za-z]{2,}$/",
        "path": [
          "email"
        ],
        "message": "Invalid email format"
      }
    ]

      4 |     },
      5 |     error: (message: string, error?: any) => {
    > 6 |         console.error(`[ERROR] [${new Date().toISOString()}] ${message}`, error?.message || error || '');
        |                 ^
      7 |         if (error?.stack) console.error(error.stack);
      8 |     },
      9 |     warn: (message: string, context?: any) => {

      at Object.error (src/utils/logger.ts:6:17)
      at handleControllerError (src/controllers/authController.ts:12:12)
      at register (src/controllers/authController.ts:63:16)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at next (node_modules/router/lib/route.js:157:13)
      at Route.dispatch (node_modules/router/lib/route.js:117:3)
      at handle (node_modules/router/index.js:435:11)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at node_modules/router/index.js:295:15
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Function.handle (node_modules/router/index.js:186:3)
      at router (node_modules/router/index.js:60:12)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at trimPrefix (node_modules/router/index.js:342:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/body-parser/lib/read.js:172:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

  console.error
    ZodError: [
      {
        "origin": "string",
        "code": "invalid_format",
        "format": "email",
        "pattern": "/^(?!\\.)(?!.*\\.\\.)([A-Za-z0-9_'+\\-\\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\\-]*\\.)+[A-Za-z]{2,}$/",
        "path": [
          "email"
        ],
        "message": "Invalid email format"
      }
    ]
        at register (/home/bytesage/campus-swap/backend/src/controllers/authController.ts:24:46)
        at Layer.handleRequest (/home/bytesage/campus-swap/backend/node_modules/router/lib/layer.js:152:17)
        at next (/home/bytesage/campus-swap/backend/node_modules/router/lib/route.js:157:13)
        at Route.dispatch (/home/bytesage/campus-swap/backend/node_modules/router/lib/route.js:117:3)
        at handle (/home/bytesage/campus-swap/backend/node_modules/router/index.js:435:11)
        at Layer.handleRequest (/home/bytesage/campus-swap/backend/node_modules/router/lib/layer.js:152:17)
        at /home/bytesage/campus-swap/backend/node_modules/router/index.js:295:15
        at processParams (/home/bytesage/campus-swap/backend/node_modules/router/index.js:582:12)
        at next (/home/bytesage/campus-swap/backend/node_modules/router/index.js:291:5)
        at Function.handle (/home/bytesage/campus-swap/backend/node_modules/router/index.js:186:3)
        at router (/home/bytesage/campus-swap/backend/node_modules/router/index.js:60:12)
        at Layer.handleRequest (/home/bytesage/campus-swap/backend/node_modules/router/lib/layer.js:152:17)
        at trimPrefix (/home/bytesage/campus-swap/backend/node_modules/router/index.js:342:13)
        at /home/bytesage/campus-swap/backend/node_modules/router/index.js:297:9
        at processParams (/home/bytesage/campus-swap/backend/node_modules/router/index.js:582:12)
        at next (/home/bytesage/campus-swap/backend/node_modules/router/index.js:291:5)
        at /home/bytesage/campus-swap/backend/node_modules/body-parser/lib/read.js:172:5
        at AsyncResource.runInAsyncScope (node:async_hooks:214:14)
        at invokeCallback (/home/bytesage/campus-swap/backend/node_modules/raw-body/index.js:238:16)
        at done (/home/bytesage/campus-swap/backend/node_modules/raw-body/index.js:227:7)
        at IncomingMessage.onEnd (/home/bytesage/campus-swap/backend/node_modules/raw-body/index.js:287:7)
        at IncomingMessage.emit (node:events:519:28)
        at endReadableNT (node:internal/streams/readable:1698:12)
        at processTicksAndRejections (node:internal/process/task_queues:90:21)

       5 |     error: (message: string, error?: any) => {
       6 |         console.error(`[ERROR] [${new Date().toISOString()}] ${message}`, error?.message || error || '');
    >  7 |         if (error?.stack) console.error(error.stack);
         |                                   ^
       8 |     },
       9 |     warn: (message: string, context?: any) => {
      10 |         console.warn(`[WARN] [${new Date().toISOString()}] ${message}`, context ? JSON.stringify(context, null, 2) : '');

      at Object.error (src/utils/logger.ts:7:35)
      at handleControllerError (src/controllers/authController.ts:12:12)
      at register (src/controllers/authController.ts:63:16)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at next (node_modules/router/lib/route.js:157:13)
      at Route.dispatch (node_modules/router/lib/route.js:117:3)
      at handle (node_modules/router/index.js:435:11)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at node_modules/router/index.js:295:15
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Function.handle (node_modules/router/index.js:186:3)
      at router (node_modules/router/index.js:60:12)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at trimPrefix (node_modules/router/index.js:342:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/body-parser/lib/read.js:172:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

  console.log
    [INFO] [2026-01-03T12:50:58.837Z] User Registration Attempt {
      "email": "test@unn.edu.ng"
    }

      at Object.info (src/utils/logger.ts:3:17)

  console.warn
    [WARN] [2026-01-03T12:50:58.845Z] Registration Failed: User exists {
      "email": "test@unn.edu.ng"
    }

       8 |     },
       9 |     warn: (message: string, context?: any) => {
    > 10 |         console.warn(`[WARN] [${new Date().toISOString()}] ${message}`, context ? JSON.stringify(context, null, 2) : '');
         |                 ^
      11 |     }
      12 | };
      13 |

      at Object.warn (src/utils/logger.ts:10:17)
      at register (src/controllers/authController.ts:31:20)

  console.log
    [INFO] [2026-01-03T12:50:58.863Z] User Login Attempt {
      "email": "test@unn.edu.ng"
    }

      at Object.info (src/utils/logger.ts:3:17)

  console.log
    [INFO] [2026-01-03T12:50:59.026Z] User Logged In Successfully {
      "userId": "7629e0b9-67af-4c24-b8ca-e6c463b08ee5"
    }

      at Object.info (src/utils/logger.ts:3:17)

  console.log
    [INFO] [2026-01-03T12:50:59.032Z] User Login Attempt {
      "email": "test@unn.edu.ng"
    }

      at Object.info (src/utils/logger.ts:3:17)

  console.warn
    [WARN] [2026-01-03T12:50:59.154Z] Login Failed: Invalid password {
      "email": "test@unn.edu.ng"
    }

       8 |     },
       9 |     warn: (message: string, context?: any) => {
    > 10 |         console.warn(`[WARN] [${new Date().toISOString()}] ${message}`, context ? JSON.stringify(context, null, 2) : '');
         |                 ^
      11 |     }
      12 | };
      13 |

      at Object.warn (src/utils/logger.ts:10:17)
      at login (src/controllers/authController.ts:82:20)

  console.log
    [INFO] [2026-01-03T12:50:59.164Z] User Login Attempt {
      "email": "test@unn.edu.ng"
    }

      at Object.info (src/utils/logger.ts:3:17)

  console.log
    [INFO] [2026-01-03T12:50:59.320Z] User Logged In Successfully {
      "userId": "7629e0b9-67af-4c24-b8ca-e6c463b08ee5"
    }

      at Object.info (src/utils/logger.ts:3:17)

  console.log
    [INFO] [2026-01-03T12:50:59.391Z] Profile Updated {
      "userId": "7629e0b9-67af-4c24-b8ca-e6c463b08ee5"
    }

      at Object.info (src/utils/logger.ts:3:17)

  console.log
    [INFO] [2026-01-03T12:50:59.443Z] Profile Updated {
      "userId": "7629e0b9-67af-4c24-b8ca-e6c463b08ee5"
    }

      at Object.info (src/utils/logger.ts:3:17)

PASS tests/auth.test.ts
  Auth Endpoints
    POST /api/auth/register
      âœ“ should register a new user successfully (318 ms)
      âœ“ should fail with invalid email (45 ms)
      âœ“ should fail if user already exists (14 ms)
    POST /api/auth/login
      âœ“ should login successfully with correct credentials (179 ms)
      âœ“ should fail with incorrect password (130 ms)
    Profile Endpoints
      âœ“ should get user profile (37 ms)
      âœ“ should update user profile (36 ms)
      âœ“ should upload profile picture (45 ms)
      âœ“ should fail to get profile without token (5 ms)

Test Suites: 1 passed, 1 total
Tests:       9 passed, 9 total
Snapshots:   0 total
Time:        3.035 s
Ran all test suites matching tests/auth.test.ts.
Jest did not exit one second after the test run has completed.

'This usually means that there are asynchronous operations that weren't stopped in your tests. Consider running Jest with `--detectOpenHandles` to troubleshoot this issue.
