
> backend@1.0.0 test
> NODE_OPTIONS=--experimental-vm-modules jest --runInBand

(node:47589) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
PASS tests/wallet.test.ts
  â— Console

    console.log
      [dotenv@17.2.3] injecting env (6) from .env -- tip: âš™ï¸  specify custom .env file path with { path: '/custom/path/.env' }

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ðŸ”„ add secrets lifecycle management: https://dotenvx.com/ops

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ðŸ—‚ï¸ backup and recover secrets: https://dotenvx.com/ops

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.log
      [INFO] [2026-01-03T11:16:53.214Z] Initializing Deposit {
        "userId": "0a260738-e68e-41a3-a445-abba11f9e447",
        "amount": 5000
      }

      at Object.info (src/utils/logger.ts:3:17)

    console.log
      [INFO] [2026-01-03T11:16:54.428Z] Paystack Webhook Received {
        "event": "charge.success",
        "reference": "test-ref-1767439014423"
      }

      at Object.info (src/utils/logger.ts:3:17)

    console.log
      [INFO] [2026-01-03T11:16:54.502Z] Deposit Successful via Webhook {
        "userId": "0a260738-e68e-41a3-a445-abba11f9e447",
        "amount": 5000,
        "reference": "test-ref-1767439014423"
      }

      at Object.info (src/utils/logger.ts:3:17)

    console.warn
      [WARN] [2026-01-03T11:16:54.520Z] Invalid Paystack Signature {
        "received": "invalid-hash"
      }

       8 |     },
       9 |     warn: (message: string, context?: any) => {
    > 10 |         console.warn(`[WARN] [${new Date().toISOString()}] ${message}`, context ? JSON.stringify(context, null, 2) : '');
         |                 ^
      11 |     }
      12 | };
      13 |

      at Object.warn (src/utils/logger.ts:10:17)
      at paystackWebhook (src/controllers/paymentController.ts:57:16)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at next (node_modules/router/lib/route.js:157:13)
      at Route.dispatch (node_modules/router/lib/route.js:117:3)
      at handle (node_modules/router/index.js:435:11)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at node_modules/router/index.js:295:15
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Function.handle (node_modules/router/index.js:186:3)
      at router (node_modules/router/index.js:60:12)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at trimPrefix (node_modules/router/index.js:342:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/body-parser/lib/read.js:172:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

PASS tests/auth.test.ts
  â— Console

    console.log
      [dotenv@17.2.3] injecting env (6) from .env -- tip: ðŸ‘¥ sync secrets across teammates & machines: https://dotenvx.com/ops

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ðŸ” prevent committing .env to code: https://dotenvx.com/precommit

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: âš™ï¸  override existing env vars with { override: true }

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.log
      [INFO] [2026-01-03T11:16:55.986Z] User Registration Attempt {
        "email": "test@unn.edu.ng"
      }

      at Object.info (src/utils/logger.ts:3:17)

    console.log
      [INFO] [2026-01-03T11:16:56.200Z] User Registered Successfully {
        "userId": "50e6835d-3ae0-4b22-bfb0-f58f7b93b922"
      }

      at Object.info (src/utils/logger.ts:3:17)

    console.error
      [ERROR] [2026-01-03T11:16:56.216Z] Register Controller Error [
        {
          "origin": "string",
          "code": "invalid_format",
          "format": "email",
          "pattern": "/^(?!\\.)(?!.*\\.\\.)([A-Za-z0-9_'+\\-\\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\\-]*\\.)+[A-Za-z]{2,}$/",
          "path": [
            "email"
          ],
          "message": "Invalid email format"
        }
      ]

      4 |     },
      5 |     error: (message: string, error?: any) => {
    > 6 |         console.error(`[ERROR] [${new Date().toISOString()}] ${message}`, error?.message || error || '');
        |                 ^
      7 |         if (error?.stack) console.error(error.stack);
      8 |     },
      9 |     warn: (message: string, context?: any) => {

      at Object.error (src/utils/logger.ts:6:17)
      at handleControllerError (src/controllers/authController.ts:12:12)
      at register (src/controllers/authController.ts:63:16)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at next (node_modules/router/lib/route.js:157:13)
      at Route.dispatch (node_modules/router/lib/route.js:117:3)
      at handle (node_modules/router/index.js:435:11)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at node_modules/router/index.js:295:15
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Function.handle (node_modules/router/index.js:186:3)
      at router (node_modules/router/index.js:60:12)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at trimPrefix (node_modules/router/index.js:342:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/body-parser/lib/read.js:172:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

    console.error
      ZodError: [
        {
          "origin": "string",
          "code": "invalid_format",
          "format": "email",
          "pattern": "/^(?!\\.)(?!.*\\.\\.)([A-Za-z0-9_'+\\-\\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\\-]*\\.)+[A-Za-z]{2,}$/",
          "path": [
            "email"
          ],
          "message": "Invalid email format"
        }
      ]
          at register (/home/bytesage/campus-swap/backend/src/controllers/authController.ts:24:46)
          at Layer.handleRequest (/home/bytesage/campus-swap/backend/node_modules/router/lib/layer.js:152:17)
          at next (/home/bytesage/campus-swap/backend/node_modules/router/lib/route.js:157:13)
          at Route.dispatch (/home/bytesage/campus-swap/backend/node_modules/router/lib/route.js:117:3)
          at handle (/home/bytesage/campus-swap/backend/node_modules/router/index.js:435:11)
          at Layer.handleRequest (/home/bytesage/campus-swap/backend/node_modules/router/lib/layer.js:152:17)
          at /home/bytesage/campus-swap/backend/node_modules/router/index.js:295:15
          at processParams (/home/bytesage/campus-swap/backend/node_modules/router/index.js:582:12)
          at next (/home/bytesage/campus-swap/backend/node_modules/router/index.js:291:5)
          at Function.handle (/home/bytesage/campus-swap/backend/node_modules/router/index.js:186:3)
          at router (/home/bytesage/campus-swap/backend/node_modules/router/index.js:60:12)
          at Layer.handleRequest (/home/bytesage/campus-swap/backend/node_modules/router/lib/layer.js:152:17)
          at trimPrefix (/home/bytesage/campus-swap/backend/node_modules/router/index.js:342:13)
          at /home/bytesage/campus-swap/backend/node_modules/router/index.js:297:9
          at processParams (/home/bytesage/campus-swap/backend/node_modules/router/index.js:582:12)
          at next (/home/bytesage/campus-swap/backend/node_modules/router/index.js:291:5)
          at /home/bytesage/campus-swap/backend/node_modules/body-parser/lib/read.js:172:5
          at AsyncResource.runInAsyncScope (node:async_hooks:214:14)
          at invokeCallback (/home/bytesage/campus-swap/backend/node_modules/raw-body/index.js:238:16)
          at done (/home/bytesage/campus-swap/backend/node_modules/raw-body/index.js:227:7)
          at IncomingMessage.onEnd (/home/bytesage/campus-swap/backend/node_modules/raw-body/index.js:287:7)
          at IncomingMessage.emit (node:events:519:28)
          at endReadableNT (node:internal/streams/readable:1698:12)
          at processTicksAndRejections (node:internal/process/task_queues:90:21)

       5 |     error: (message: string, error?: any) => {
       6 |         console.error(`[ERROR] [${new Date().toISOString()}] ${message}`, error?.message || error || '');
    >  7 |         if (error?.stack) console.error(error.stack);
         |                                   ^
       8 |     },
       9 |     warn: (message: string, context?: any) => {
      10 |         console.warn(`[WARN] [${new Date().toISOString()}] ${message}`, context ? JSON.stringify(context, null, 2) : '');

      at Object.error (src/utils/logger.ts:7:35)
      at handleControllerError (src/controllers/authController.ts:12:12)
      at register (src/controllers/authController.ts:63:16)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at next (node_modules/router/lib/route.js:157:13)
      at Route.dispatch (node_modules/router/lib/route.js:117:3)
      at handle (node_modules/router/index.js:435:11)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at node_modules/router/index.js:295:15
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Function.handle (node_modules/router/index.js:186:3)
      at router (node_modules/router/index.js:60:12)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at trimPrefix (node_modules/router/index.js:342:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/body-parser/lib/read.js:172:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

    console.log
      [INFO] [2026-01-03T11:16:56.237Z] User Registration Attempt {
        "email": "test@unn.edu.ng"
      }

      at Object.info (src/utils/logger.ts:3:17)

    console.warn
      [WARN] [2026-01-03T11:16:56.242Z] Registration Failed: User exists {
        "email": "test@unn.edu.ng"
      }

       8 |     },
       9 |     warn: (message: string, context?: any) => {
    > 10 |         console.warn(`[WARN] [${new Date().toISOString()}] ${message}`, context ? JSON.stringify(context, null, 2) : '');
         |                 ^
      11 |     }
      12 | };
      13 |

      at Object.warn (src/utils/logger.ts:10:17)
      at register (src/controllers/authController.ts:31:20)

    console.log
      [INFO] [2026-01-03T11:16:56.252Z] User Login Attempt {
        "email": "test@unn.edu.ng"
      }

      at Object.info (src/utils/logger.ts:3:17)

    console.log
      [INFO] [2026-01-03T11:16:56.385Z] User Logged In Successfully {
        "userId": "50e6835d-3ae0-4b22-bfb0-f58f7b93b922"
      }

      at Object.info (src/utils/logger.ts:3:17)

    console.log
      [INFO] [2026-01-03T11:16:56.390Z] User Login Attempt {
        "email": "test@unn.edu.ng"
      }

      at Object.info (src/utils/logger.ts:3:17)

    console.warn
      [WARN] [2026-01-03T11:16:56.527Z] Login Failed: Invalid password {
        "email": "test@unn.edu.ng"
      }

       8 |     },
       9 |     warn: (message: string, context?: any) => {
    > 10 |         console.warn(`[WARN] [${new Date().toISOString()}] ${message}`, context ? JSON.stringify(context, null, 2) : '');
         |                 ^
      11 |     }
      12 | };
      13 |

      at Object.warn (src/utils/logger.ts:10:17)
      at login (src/controllers/authController.ts:82:20)

    console.log
      [INFO] [2026-01-03T11:16:56.537Z] User Login Attempt {
        "email": "test@unn.edu.ng"
      }

      at Object.info (src/utils/logger.ts:3:17)

    console.log
      [INFO] [2026-01-03T11:16:56.679Z] User Logged In Successfully {
        "userId": "50e6835d-3ae0-4b22-bfb0-f58f7b93b922"
      }

      at Object.info (src/utils/logger.ts:3:17)

    console.log
      [INFO] [2026-01-03T11:16:56.792Z] Profile Updated {
        "userId": "50e6835d-3ae0-4b22-bfb0-f58f7b93b922"
      }

      at Object.info (src/utils/logger.ts:3:17)

PASS tests/analytics_enhanced.test.ts
  â— Console

    console.log
      [dotenv@17.2.3] injecting env (6) from .env -- tip: âš™ï¸  specify custom .env file path with { path: '/custom/path/.env' }

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: âš™ï¸  suppress all logs with { quiet: true }

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ðŸ”„ add secrets lifecycle management: https://dotenvx.com/ops

      at _log (node_modules/dotenv/lib/main.js:142:11)

PASS tests/marketplace_interaction.test.ts
  â— Console

    console.log
      [dotenv@17.2.3] injecting env (6) from .env -- tip: âœ… audit secrets and track compliance: https://dotenvx.com/ops

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ðŸ”‘ add access controls to secrets: https://dotenvx.com/ops

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ðŸ“¡ add observability to secrets: https://dotenvx.com/ops

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.log
      [INFO] [2026-01-03T11:17:00.127Z] Purchase Successful {
        "listingId": "28ce5407-0bbc-400b-8789-60247c792096",
        "buyerId": "a5fc6ff0-4130-4d67-a488-f3ddface558b"
      }

      at Object.info (src/utils/logger.ts:3:17)

    console.log
      [INFO] [2026-01-03T11:17:00.248Z] Listing Status Updated {
        "listingId": "0e0b7cf4-0a05-49a6-9470-a4e0fd0e5508",
        "status": "RESERVED"
      }

      at Object.info (src/utils/logger.ts:3:17)

    console.log
      [INFO] [2026-01-03T11:17:00.314Z] Listing Reserved {
        "listingId": "ed8ea5e1-4349-411b-8a9d-b70057db41b3",
        "reservedBy": "a5fc6ff0-4130-4d67-a488-f3ddface558b"
      }

      at Object.info (src/utils/logger.ts:3:17)

PASS tests/analytics.test.ts
  â— Console

    console.log
      [dotenv@17.2.3] injecting env (6) from .env -- tip: ðŸ” prevent building .env in docker: https://dotenvx.com/prebuild

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ðŸ”‘ add access controls to secrets: https://dotenvx.com/ops

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.error
      [ERROR] [2026-01-03T11:17:02.182Z] CreateReport Controller Error [
        {
          "code": "invalid_value",
          "values": [
            "PROHIBITED_ITEM",
            "MISLEADING",
            "SCAM",
            "HARASSMENT",
            "INAPPROPRIATE_BEHAVIOR"
          ],
          "path": [
            "reason"
          ],
          "message": "Invalid option: expected one of \"PROHIBITED_ITEM\"|\"MISLEADING\"|\"SCAM\"|\"HARASSMENT\"|\"INAPPROPRIATE_BEHAVIOR\""
        },
        {
          "origin": "string",
          "code": "too_small",
          "minimum": 10,
          "inclusive": true,
          "path": [
            "description"
          ],
          "message": "Too small: expected string to have >=10 characters"
        }
      ]

      4 |     },
      5 |     error: (message: string, error?: any) => {
    > 6 |         console.error(`[ERROR] [${new Date().toISOString()}] ${message}`, error?.message || error || '');
        |                 ^
      7 |         if (error?.stack) console.error(error.stack);
      8 |     },
      9 |     warn: (message: string, context?: any) => {

      at Object.error (src/utils/logger.ts:6:17)
      at handleControllerError (src/controllers/authController.ts:12:12)
      at createReport (src/controllers/reportController.ts:39:16)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at next (node_modules/router/lib/route.js:157:13)
      at Route.dispatch (node_modules/router/lib/route.js:117:3)
      at handle (node_modules/router/index.js:435:11)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at node_modules/router/index.js:295:15
      at param (node_modules/router/index.js:600:14)
      at param (node_modules/router/index.js:610:14)
      at processParams (node_modules/router/index.js:664:3)
      at next (node_modules/router/index.js:291:5)
      at protect (src/routes/authRoutes.ts:17:9)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at trimPrefix (node_modules/router/index.js:342:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Function.handle (node_modules/router/index.js:186:3)
      at router (node_modules/router/index.js:60:12)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at trimPrefix (node_modules/router/index.js:342:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/body-parser/lib/read.js:172:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

    console.error
      ZodError: [
        {
          "code": "invalid_value",
          "values": [
            "PROHIBITED_ITEM",
            "MISLEADING",
            "SCAM",
            "HARASSMENT",
            "INAPPROPRIATE_BEHAVIOR"
          ],
          "path": [
            "reason"
          ],
          "message": "Invalid option: expected one of \"PROHIBITED_ITEM\"|\"MISLEADING\"|\"SCAM\"|\"HARASSMENT\"|\"INAPPROPRIATE_BEHAVIOR\""
        },
        {
          "origin": "string",
          "code": "too_small",
          "minimum": 10,
          "inclusive": true,
          "path": [
            "description"
          ],
          "message": "Too small: expected string to have >=10 characters"
        }
      ]
          at createReport (/home/bytesage/campus-swap/backend/src/controllers/reportController.ts:12:50)
          at Layer.handleRequest (/home/bytesage/campus-swap/backend/node_modules/router/lib/layer.js:152:17)
          at next (/home/bytesage/campus-swap/backend/node_modules/router/lib/route.js:157:13)
          at Route.dispatch (/home/bytesage/campus-swap/backend/node_modules/router/lib/route.js:117:3)
          at handle (/home/bytesage/campus-swap/backend/node_modules/router/index.js:435:11)
          at Layer.handleRequest (/home/bytesage/campus-swap/backend/node_modules/router/lib/layer.js:152:17)
          at /home/bytesage/campus-swap/backend/node_modules/router/index.js:295:15
          at param (/home/bytesage/campus-swap/backend/node_modules/router/index.js:600:14)
          at param (/home/bytesage/campus-swap/backend/node_modules/router/index.js:610:14)
          at processParams (/home/bytesage/campus-swap/backend/node_modules/router/index.js:664:3)
          at next (/home/bytesage/campus-swap/backend/node_modules/router/index.js:291:5)
          at protect (/home/bytesage/campus-swap/backend/src/routes/authRoutes.ts:17:9)
          at Layer.handleRequest (/home/bytesage/campus-swap/backend/node_modules/router/lib/layer.js:152:17)
          at trimPrefix (/home/bytesage/campus-swap/backend/node_modules/router/index.js:342:13)
          at /home/bytesage/campus-swap/backend/node_modules/router/index.js:297:9
          at processParams (/home/bytesage/campus-swap/backend/node_modules/router/index.js:582:12)
          at next (/home/bytesage/campus-swap/backend/node_modules/router/index.js:291:5)
          at Function.handle (/home/bytesage/campus-swap/backend/node_modules/router/index.js:186:3)
          at router (/home/bytesage/campus-swap/backend/node_modules/router/index.js:60:12)
          at Layer.handleRequest (/home/bytesage/campus-swap/backend/node_modules/router/lib/layer.js:152:17)
          at trimPrefix (/home/bytesage/campus-swap/backend/node_modules/router/index.js:342:13)
          at /home/bytesage/campus-swap/backend/node_modules/router/index.js:297:9
          at processParams (/home/bytesage/campus-swap/backend/node_modules/router/index.js:582:12)
          at next (/home/bytesage/campus-swap/backend/node_modules/router/index.js:291:5)
          at /home/bytesage/campus-swap/backend/node_modules/body-parser/lib/read.js:172:5
          at AsyncResource.runInAsyncScope (node:async_hooks:214:14)
          at invokeCallback (/home/bytesage/campus-swap/backend/node_modules/raw-body/index.js:238:16)
          at done (/home/bytesage/campus-swap/backend/node_modules/raw-body/index.js:227:7)
          at IncomingMessage.onEnd (/home/bytesage/campus-swap/backend/node_modules/raw-body/index.js:287:7)
          at IncomingMessage.emit (node:events:519:28)
          at endReadableNT (node:internal/streams/readable:1698:12)
          at processTicksAndRejections (node:internal/process/task_queues:90:21)

       5 |     error: (message: string, error?: any) => {
       6 |         console.error(`[ERROR] [${new Date().toISOString()}] ${message}`, error?.message || error || '');
    >  7 |         if (error?.stack) console.error(error.stack);
         |                                   ^
       8 |     },
       9 |     warn: (message: string, context?: any) => {
      10 |         console.warn(`[WARN] [${new Date().toISOString()}] ${message}`, context ? JSON.stringify(context, null, 2) : '');

      at Object.error (src/utils/logger.ts:7:35)
      at handleControllerError (src/controllers/authController.ts:12:12)
      at createReport (src/controllers/reportController.ts:39:16)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at next (node_modules/router/lib/route.js:157:13)
      at Route.dispatch (node_modules/router/lib/route.js:117:3)
      at handle (node_modules/router/index.js:435:11)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at node_modules/router/index.js:295:15
      at param (node_modules/router/index.js:600:14)
      at param (node_modules/router/index.js:610:14)
      at processParams (node_modules/router/index.js:664:3)
      at next (node_modules/router/index.js:291:5)
      at protect (src/routes/authRoutes.ts:17:9)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at trimPrefix (node_modules/router/index.js:342:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Function.handle (node_modules/router/index.js:186:3)
      at router (node_modules/router/index.js:60:12)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at trimPrefix (node_modules/router/index.js:342:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/body-parser/lib/read.js:172:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

PASS tests/moderation.test.ts
  â— Console

    console.log
      [dotenv@17.2.3] injecting env (6) from .env -- tip: âš™ï¸  suppress all logs with { quiet: true }

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: âš™ï¸  enable debug logging with { debug: true }

      at _log (node_modules/dotenv/lib/main.js:142:11)

PASS tests/escrow.test.ts
  â— Console

    console.log
      [dotenv@17.2.3] injecting env (6) from .env -- tip: ðŸ” encrypt with Dotenvx: https://dotenvx.com

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: âš™ï¸  enable debug logging with { debug: true }

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ðŸ”„ add secrets lifecycle management: https://dotenvx.com/ops

      at _log (node_modules/dotenv/lib/main.js:142:11)

PASS tests/notifications.test.ts
  â— Console

    console.log
      [dotenv@17.2.3] injecting env (6) from .env -- tip: âš™ï¸  load multiple .env files with { path: ['.env.local', '.env'] }

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ðŸ” prevent building .env in docker: https://dotenvx.com/prebuild

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ðŸ”‘ add access controls to secrets: https://dotenvx.com/ops

      at _log (node_modules/dotenv/lib/main.js:142:11)

PASS tests/verification.test.ts
  â— Console

    console.log
      [dotenv@17.2.3] injecting env (6) from .env -- tip: âš™ï¸  write to custom object with { processEnv: myObject }

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: âš™ï¸  load multiple .env files with { path: ['.env.local', '.env'] }

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ðŸ—‚ï¸ backup and recover secrets: https://dotenvx.com/ops

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.log
      [INFO] [2026-01-03T11:17:10.629Z] ID Documents Uploaded {
        "userId": "89fed9df-055f-4e02-ba0c-ee28518117ef",
        "verificationId": "84927328-9e5d-4f24-a948-7ab6fe2bb503"
      }

      at Object.info (src/utils/logger.ts:3:17)

PASS tests/admin.test.ts
  â— Console

    console.log
      [dotenv@17.2.3] injecting env (6) from .env -- tip: âš™ï¸  suppress all logs with { quiet: true }

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ðŸ‘¥ sync secrets across teammates & machines: https://dotenvx.com/ops

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.log
      [INFO] [2026-01-03T11:17:13.109Z] Admin Dashboard Access {
        "adminId": "27cc8a41-d5b4-4f68-b20b-9a41bd83a831",
        "adminEmail": "admin@unn.edu.ng",
        "period": "last_30_days",
        "timestamp": "2026-01-03T11:17:13.109Z"
      }

      at Object.info (src/utils/logger.ts:3:17)

    console.log
      [INFO] [2026-01-03T11:17:13.278Z] Admin Dashboard Access {
        "adminId": "27cc8a41-d5b4-4f68-b20b-9a41bd83a831",
        "adminEmail": "admin@unn.edu.ng",
        "period": "last_7_days",
        "timestamp": "2026-01-03T11:17:13.278Z"
      }

      at Object.info (src/utils/logger.ts:3:17)

    console.log
      [INFO] [2026-01-03T11:17:13.354Z] Admin Dashboard Access {
        "adminId": "27cc8a41-d5b4-4f68-b20b-9a41bd83a831",
        "adminEmail": "admin@unn.edu.ng",
        "period": "last_30_days",
        "timestamp": "2026-01-03T11:17:13.354Z"
      }

      at Object.info (src/utils/logger.ts:3:17)

    console.log
      [INFO] [2026-01-03T11:17:13.354Z] Admin Dashboard - Serving from cache

      at Object.info (src/utils/logger.ts:3:17)

    console.log
      [INFO] [2026-01-03T11:17:13.363Z] Admin Dashboard Access {
        "adminId": "27cc8a41-d5b4-4f68-b20b-9a41bd83a831",
        "adminEmail": "admin@unn.edu.ng",
        "period": "last_30_days",
        "timestamp": "2026-01-03T11:17:13.363Z"
      }

      at Object.info (src/utils/logger.ts:3:17)

    console.log
      [INFO] [2026-01-03T11:17:13.364Z] Admin Dashboard - Serving from cache

      at Object.info (src/utils/logger.ts:3:17)

    console.log
      [INFO] [2026-01-03T11:17:13.425Z] Admin Dashboard Access {
        "adminId": "27cc8a41-d5b4-4f68-b20b-9a41bd83a831",
        "adminEmail": "admin@unn.edu.ng",
        "period": "last_30_days",
        "timestamp": "2026-01-03T11:17:13.425Z"
      }

      at Object.info (src/utils/logger.ts:3:17)

    console.log
      [INFO] [2026-01-03T11:17:13.425Z] Admin Dashboard - Serving from cache

      at Object.info (src/utils/logger.ts:3:17)

    console.log
      [INFO] [2026-01-03T11:17:13.432Z] Admin Dashboard Access {
        "adminId": "27cc8a41-d5b4-4f68-b20b-9a41bd83a831",
        "adminEmail": "admin@unn.edu.ng",
        "period": "last_30_days",
        "timestamp": "2026-01-03T11:17:13.432Z"
      }

      at Object.info (src/utils/logger.ts:3:17)

    console.log
      [INFO] [2026-01-03T11:17:13.434Z] Admin Dashboard - Serving from cache

      at Object.info (src/utils/logger.ts:3:17)

    console.log
      [INFO] [2026-01-03T11:17:13.437Z] Admin Dashboard Access {
        "adminId": "27cc8a41-d5b4-4f68-b20b-9a41bd83a831",
        "adminEmail": "admin@unn.edu.ng",
        "period": "last_30_days",
        "timestamp": "2026-01-03T11:17:13.437Z"
      }

      at Object.info (src/utils/logger.ts:3:17)

    console.log
      [INFO] [2026-01-03T11:17:13.438Z] Admin Dashboard - Serving from cache

      at Object.info (src/utils/logger.ts:3:17)

    console.log
      [INFO] [2026-01-03T11:17:13.440Z] Admin Dashboard Access {
        "adminId": "27cc8a41-d5b4-4f68-b20b-9a41bd83a831",
        "adminEmail": "admin@unn.edu.ng",
        "period": "last_30_days",
        "timestamp": "2026-01-03T11:17:13.440Z"
      }

      at Object.info (src/utils/logger.ts:3:17)

    console.log
      [INFO] [2026-01-03T11:17:13.440Z] Admin Dashboard - Serving from cache

      at Object.info (src/utils/logger.ts:3:17)

    console.log
      [INFO] [2026-01-03T11:17:13.442Z] Admin Dashboard Access {
        "adminId": "27cc8a41-d5b4-4f68-b20b-9a41bd83a831",
        "adminEmail": "admin@unn.edu.ng",
        "period": "last_30_days",
        "timestamp": "2026-01-03T11:17:13.442Z"
      }

      at Object.info (src/utils/logger.ts:3:17)

    console.log
      [INFO] [2026-01-03T11:17:13.443Z] Admin Dashboard - Serving from cache

      at Object.info (src/utils/logger.ts:3:17)

    console.log
      [INFO] [2026-01-03T11:17:13.448Z] Admin Dashboard Access {
        "adminId": "27cc8a41-d5b4-4f68-b20b-9a41bd83a831",
        "adminEmail": "admin@unn.edu.ng",
        "period": "last_30_days",
        "timestamp": "2026-01-03T11:17:13.448Z"
      }

      at Object.info (src/utils/logger.ts:3:17)

    console.log
      [INFO] [2026-01-03T11:17:13.449Z] Admin Dashboard - Serving from cache

      at Object.info (src/utils/logger.ts:3:17)

PASS tests/admin_users.test.ts
  â— Console

    console.log
      [dotenv@17.2.3] injecting env (6) from .env -- tip: ðŸ”„ add secrets lifecycle management: https://dotenvx.com/ops

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ðŸ”‘ add access controls to secrets: https://dotenvx.com/ops

      at _log (node_modules/dotenv/lib/main.js:142:11)

PASS tests/conversations.test.ts
  â— Console

    console.log
      [dotenv@17.2.3] injecting env (6) from .env -- tip: ðŸ“¡ add observability to secrets: https://dotenvx.com/ops

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: âš™ï¸  override existing env vars with { override: true }

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ðŸ” encrypt with Dotenvx: https://dotenvx.com

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.log
      [INFO] [2026-01-03T11:17:16.748Z] New Conversation Started {
        "conversationId": "59b7378c-9cf4-4871-bc3a-3daa7958ef8b",
        "buyerId": "b76ccab2-29b8-41cf-bfb0-cdb5badf71ff",
        "listingId": "85f4ba94-1fdd-4351-ad78-31ebba4142aa"
      }

      at Object.info (src/utils/logger.ts:3:17)

    console.error
      [ERROR] [2026-01-03T11:17:16.766Z] StartConversation Controller Error [
        {
          "expected": "string",
          "code": "invalid_type",
          "path": [
            "listingId"
          ],
          "message": "Invalid input: expected string, received undefined"
        }
      ]

      4 |     },
      5 |     error: (message: string, error?: any) => {
    > 6 |         console.error(`[ERROR] [${new Date().toISOString()}] ${message}`, error?.message || error || '');
        |                 ^
      7 |         if (error?.stack) console.error(error.stack);
      8 |     },
      9 |     warn: (message: string, context?: any) => {

      at Object.error (src/utils/logger.ts:6:17)
      at handleControllerError (src/controllers/authController.ts:12:12)
      at startConversation (src/controllers/conversationController.ts:43:16)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at next (node_modules/router/lib/route.js:157:13)
      at Route.dispatch (node_modules/router/lib/route.js:117:3)
      at handle (node_modules/router/index.js:435:11)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at node_modules/router/index.js:295:15
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at protect (src/routes/authRoutes.ts:17:9)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at trimPrefix (node_modules/router/index.js:342:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Function.handle (node_modules/router/index.js:186:3)
      at router (node_modules/router/index.js:60:12)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at trimPrefix (node_modules/router/index.js:342:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/body-parser/lib/read.js:172:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

    console.error
      ZodError: [
        {
          "expected": "string",
          "code": "invalid_type",
          "path": [
            "listingId"
          ],
          "message": "Invalid input: expected string, received undefined"
        }
      ]
          at startConversation (/home/bytesage/campus-swap/backend/src/controllers/conversationController.ts:9:55)
          at Layer.handleRequest (/home/bytesage/campus-swap/backend/node_modules/router/lib/layer.js:152:17)
          at next (/home/bytesage/campus-swap/backend/node_modules/router/lib/route.js:157:13)
          at Route.dispatch (/home/bytesage/campus-swap/backend/node_modules/router/lib/route.js:117:3)
          at handle (/home/bytesage/campus-swap/backend/node_modules/router/index.js:435:11)
          at Layer.handleRequest (/home/bytesage/campus-swap/backend/node_modules/router/lib/layer.js:152:17)
          at /home/bytesage/campus-swap/backend/node_modules/router/index.js:295:15
          at processParams (/home/bytesage/campus-swap/backend/node_modules/router/index.js:582:12)
          at next (/home/bytesage/campus-swap/backend/node_modules/router/index.js:291:5)
          at protect (/home/bytesage/campus-swap/backend/src/routes/authRoutes.ts:17:9)
          at Layer.handleRequest (/home/bytesage/campus-swap/backend/node_modules/router/lib/layer.js:152:17)
          at trimPrefix (/home/bytesage/campus-swap/backend/node_modules/router/index.js:342:13)
          at /home/bytesage/campus-swap/backend/node_modules/router/index.js:297:9
          at processParams (/home/bytesage/campus-swap/backend/node_modules/router/index.js:582:12)
          at next (/home/bytesage/campus-swap/backend/node_modules/router/index.js:291:5)
          at Function.handle (/home/bytesage/campus-swap/backend/node_modules/router/index.js:186:3)
          at router (/home/bytesage/campus-swap/backend/node_modules/router/index.js:60:12)
          at Layer.handleRequest (/home/bytesage/campus-swap/backend/node_modules/router/lib/layer.js:152:17)
          at trimPrefix (/home/bytesage/campus-swap/backend/node_modules/router/index.js:342:13)
          at /home/bytesage/campus-swap/backend/node_modules/router/index.js:297:9
          at processParams (/home/bytesage/campus-swap/backend/node_modules/router/index.js:582:12)
          at next (/home/bytesage/campus-swap/backend/node_modules/router/index.js:291:5)
          at /home/bytesage/campus-swap/backend/node_modules/body-parser/lib/read.js:172:5
          at AsyncResource.runInAsyncScope (node:async_hooks:214:14)
          at invokeCallback (/home/bytesage/campus-swap/backend/node_modules/raw-body/index.js:238:16)
          at done (/home/bytesage/campus-swap/backend/node_modules/raw-body/index.js:227:7)
          at IncomingMessage.onEnd (/home/bytesage/campus-swap/backend/node_modules/raw-body/index.js:287:7)
          at IncomingMessage.emit (node:events:519:28)
          at endReadableNT (node:internal/streams/readable:1698:12)
          at processTicksAndRejections (node:internal/process/task_queues:90:21)

       5 |     error: (message: string, error?: any) => {
       6 |         console.error(`[ERROR] [${new Date().toISOString()}] ${message}`, error?.message || error || '');
    >  7 |         if (error?.stack) console.error(error.stack);
         |                                   ^
       8 |     },
       9 |     warn: (message: string, context?: any) => {
      10 |         console.warn(`[WARN] [${new Date().toISOString()}] ${message}`, context ? JSON.stringify(context, null, 2) : '');

      at Object.error (src/utils/logger.ts:7:35)
      at handleControllerError (src/controllers/authController.ts:12:12)
      at startConversation (src/controllers/conversationController.ts:43:16)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at next (node_modules/router/lib/route.js:157:13)
      at Route.dispatch (node_modules/router/lib/route.js:117:3)
      at handle (node_modules/router/index.js:435:11)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at node_modules/router/index.js:295:15
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at protect (src/routes/authRoutes.ts:17:9)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at trimPrefix (node_modules/router/index.js:342:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Function.handle (node_modules/router/index.js:186:3)
      at router (node_modules/router/index.js:60:12)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at trimPrefix (node_modules/router/index.js:342:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/body-parser/lib/read.js:172:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

    console.log
      [INFO] [2026-01-03T11:17:16.881Z] Message Sent {
        "conversationId": "59b7378c-9cf4-4871-bc3a-3daa7958ef8b",
        "senderId": "b76ccab2-29b8-41cf-bfb0-cdb5badf71ff",
        "messageId": "963e678c-49d1-4d2c-bc2a-721b0ad221b7"
      }

      at Object.info (src/utils/logger.ts:3:17)

PASS tests/marketplace.test.ts
  â— Console

    console.log
      [dotenv@17.2.3] injecting env (6) from .env -- tip: ðŸ” prevent building .env in docker: https://dotenvx.com/prebuild

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ðŸ” prevent building .env in docker: https://dotenvx.com/prebuild

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: âš™ï¸  suppress all logs with { quiet: true }

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.log
      [INFO] [2026-01-03T11:17:18.399Z] Creating Listing {
        "sellerId": "3556808f-a3ff-412a-ab3c-cd2189426143",
        "title": "Test Textbook"
      }

      at Object.info (src/utils/logger.ts:3:17)

    console.log
      [INFO] [2026-01-03T11:17:18.421Z] Listing Created Successfully {
        "listingId": "020b2b52-b94d-47b6-9e60-b70926d07589"
      }

      at Object.info (src/utils/logger.ts:3:17)

    console.error
      [ERROR] [2026-01-03T11:17:18.451Z] CreateListing Controller Error [
        {
          "origin": "string",
          "code": "too_small",
          "minimum": 3,
          "inclusive": true,
          "path": [
            "title"
          ],
          "message": "Too small: expected string to have >=3 characters"
        },
        {
          "expected": "string",
          "code": "invalid_type",
          "path": [
            "description"
          ],
          "message": "Invalid input: expected string, received undefined"
        },
        {
          "expected": "string",
          "code": "invalid_type",
          "path": [
            "price"
          ],
          "message": "Invalid input: expected string, received undefined"
        },
        {
          "expected": "string",
          "code": "invalid_type",
          "path": [
            "category"
          ],
          "message": "Invalid input: expected string, received undefined"
        },
        {
          "code": "invalid_value",
          "values": [
            "NEW",
            "USED",
            "FAIR"
          ],
          "path": [
            "condition"
          ],
          "message": "Invalid option: expected one of \"NEW\"|\"USED\"|\"FAIR\""
        }
      ]

      4 |     },
      5 |     error: (message: string, error?: any) => {
    > 6 |         console.error(`[ERROR] [${new Date().toISOString()}] ${message}`, error?.message || error || '');
        |                 ^
      7 |         if (error?.stack) console.error(error.stack);
      8 |     },
      9 |     warn: (message: string, context?: any) => {

      at Object.error (src/utils/logger.ts:6:17)
      at handleControllerError (src/controllers/listingController.ts:9:12)
      at createListing (src/controllers/listingController.ts:50:16)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at next (node_modules/router/lib/route.js:157:13)
      at multerMiddleware (node_modules/multer/lib/make-middleware.js:19:41)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at next (node_modules/router/lib/route.js:157:13)
      at protect (src/routes/listingRoutes.ts:29:9)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at next (node_modules/router/lib/route.js:157:13)
      at Route.dispatch (node_modules/router/lib/route.js:117:3)
      at handle (node_modules/router/index.js:435:11)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at node_modules/router/index.js:295:15
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Function.handle (node_modules/router/index.js:186:3)
      at router (node_modules/router/index.js:60:12)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at trimPrefix (node_modules/router/index.js:342:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/body-parser/lib/read.js:172:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

    console.error
      ZodError: [
        {
          "origin": "string",
          "code": "too_small",
          "minimum": 3,
          "inclusive": true,
          "path": [
            "title"
          ],
          "message": "Too small: expected string to have >=3 characters"
        },
        {
          "expected": "string",
          "code": "invalid_type",
          "path": [
            "description"
          ],
          "message": "Invalid input: expected string, received undefined"
        },
        {
          "expected": "string",
          "code": "invalid_type",
          "path": [
            "price"
          ],
          "message": "Invalid input: expected string, received undefined"
        },
        {
          "expected": "string",
          "code": "invalid_type",
          "path": [
            "category"
          ],
          "message": "Invalid input: expected string, received undefined"
        },
        {
          "code": "invalid_value",
          "values": [
            "NEW",
            "USED",
            "FAIR"
          ],
          "path": [
            "condition"
          ],
          "message": "Invalid option: expected one of \"NEW\"|\"USED\"|\"FAIR\""
        }
      ]
          at createListing (/home/bytesage/campus-swap/backend/src/controllers/listingController.ts:21:51)
          at Layer.handleRequest (/home/bytesage/campus-swap/backend/node_modules/router/lib/layer.js:152:17)
          at next (/home/bytesage/campus-swap/backend/node_modules/router/lib/route.js:157:13)
          at multerMiddleware (/home/bytesage/campus-swap/backend/node_modules/multer/lib/make-middleware.js:19:41)
          at Layer.handleRequest (/home/bytesage/campus-swap/backend/node_modules/router/lib/layer.js:152:17)
          at next (/home/bytesage/campus-swap/backend/node_modules/router/lib/route.js:157:13)
          at protect (/home/bytesage/campus-swap/backend/src/routes/listingRoutes.ts:29:9)
          at Layer.handleRequest (/home/bytesage/campus-swap/backend/node_modules/router/lib/layer.js:152:17)
          at next (/home/bytesage/campus-swap/backend/node_modules/router/lib/route.js:157:13)
          at Route.dispatch (/home/bytesage/campus-swap/backend/node_modules/router/lib/route.js:117:3)
          at handle (/home/bytesage/campus-swap/backend/node_modules/router/index.js:435:11)
          at Layer.handleRequest (/home/bytesage/campus-swap/backend/node_modules/router/lib/layer.js:152:17)
          at /home/bytesage/campus-swap/backend/node_modules/router/index.js:295:15
          at processParams (/home/bytesage/campus-swap/backend/node_modules/router/index.js:582:12)
          at next (/home/bytesage/campus-swap/backend/node_modules/router/index.js:291:5)
          at Function.handle (/home/bytesage/campus-swap/backend/node_modules/router/index.js:186:3)
          at router (/home/bytesage/campus-swap/backend/node_modules/router/index.js:60:12)
          at Layer.handleRequest (/home/bytesage/campus-swap/backend/node_modules/router/lib/layer.js:152:17)
          at trimPrefix (/home/bytesage/campus-swap/backend/node_modules/router/index.js:342:13)
          at /home/bytesage/campus-swap/backend/node_modules/router/index.js:297:9
          at processParams (/home/bytesage/campus-swap/backend/node_modules/router/index.js:582:12)
          at next (/home/bytesage/campus-swap/backend/node_modules/router/index.js:291:5)
          at /home/bytesage/campus-swap/backend/node_modules/body-parser/lib/read.js:172:5
          at AsyncResource.runInAsyncScope (node:async_hooks:214:14)
          at invokeCallback (/home/bytesage/campus-swap/backend/node_modules/raw-body/index.js:238:16)
          at done (/home/bytesage/campus-swap/backend/node_modules/raw-body/index.js:227:7)
          at IncomingMessage.onEnd (/home/bytesage/campus-swap/backend/node_modules/raw-body/index.js:287:7)
          at IncomingMessage.emit (node:events:519:28)
          at endReadableNT (node:internal/streams/readable:1698:12)
          at processTicksAndRejections (node:internal/process/task_queues:90:21)

       5 |     error: (message: string, error?: any) => {
       6 |         console.error(`[ERROR] [${new Date().toISOString()}] ${message}`, error?.message || error || '');
    >  7 |         if (error?.stack) console.error(error.stack);
         |                                   ^
       8 |     },
       9 |     warn: (message: string, context?: any) => {
      10 |         console.warn(`[WARN] [${new Date().toISOString()}] ${message}`, context ? JSON.stringify(context, null, 2) : '');

      at Object.error (src/utils/logger.ts:7:35)
      at handleControllerError (src/controllers/listingController.ts:9:12)
      at createListing (src/controllers/listingController.ts:50:16)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at next (node_modules/router/lib/route.js:157:13)
      at multerMiddleware (node_modules/multer/lib/make-middleware.js:19:41)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at next (node_modules/router/lib/route.js:157:13)
      at protect (src/routes/listingRoutes.ts:29:9)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at next (node_modules/router/lib/route.js:157:13)
      at Route.dispatch (node_modules/router/lib/route.js:117:3)
      at handle (node_modules/router/index.js:435:11)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at node_modules/router/index.js:295:15
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Function.handle (node_modules/router/index.js:186:3)
      at router (node_modules/router/index.js:60:12)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at trimPrefix (node_modules/router/index.js:342:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/body-parser/lib/read.js:172:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

    console.log
      [INFO] [2026-01-03T11:17:18.630Z] Listing Updated Successfully {
        "listingId": "020b2b52-b94d-47b6-9e60-b70926d07589"
      }

      at Object.info (src/utils/logger.ts:3:17)

    console.warn
      [WARN] [2026-01-03T11:17:18.674Z] Unauthorized update attempt {
        "listingId": "020b2b52-b94d-47b6-9e60-b70926d07589",
        "userId": "other-id"
      }

       8 |     },
       9 |     warn: (message: string, context?: any) => {
    > 10 |         console.warn(`[WARN] [${new Date().toISOString()}] ${message}`, context ? JSON.stringify(context, null, 2) : '');
         |                 ^
      11 |     }
      12 | };
      13 |

      at Object.warn (src/utils/logger.ts:10:17)
      at updateListing (src/controllers/listingController.ts:101:20)

    console.log
      [INFO] [2026-01-03T11:17:18.786Z] Listing Deleted Successfully {
        "listingId": "020b2b52-b94d-47b6-9e60-b70926d07589"
      }

      at Object.info (src/utils/logger.ts:3:17)

PASS tests/preferences.test.ts
  â— Console

    console.log
      [dotenv@17.2.3] injecting env (6) from .env -- tip: ðŸ› ï¸  run anywhere with `dotenvx run -- yourcommand`

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: âš™ï¸  load multiple .env files with { path: ['.env.local', '.env'] }

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: âš™ï¸  write to custom object with { processEnv: myObject }

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.log
      [INFO] [2026-01-03T11:17:20.800Z] Theme Preferences Updated {
        "userId": "4d85ef24-5b9e-4209-a5fd-7e835d5293d6",
        "themeMode": "DARK"
      }

      at Object.info (src/utils/logger.ts:3:17)

    console.log
      [INFO] [2026-01-03T11:17:20.871Z] Theme Preferences Updated {
        "userId": "4d85ef24-5b9e-4209-a5fd-7e835d5293d6",
        "themeMode": "DARK"
      }

      at Object.info (src/utils/logger.ts:3:17)

    console.error
      [ERROR] [2026-01-03T11:17:20.903Z] UpdateTheme Controller Error [
        {
          "origin": "string",
          "code": "invalid_format",
          "format": "regex",
          "pattern": "/^#[0-9A-F]{6}$/i",
          "path": [
            "accentColor"
          ],
          "message": "Invalid hex color"
        }
      ]

      4 |     },
      5 |     error: (message: string, error?: any) => {
    > 6 |         console.error(`[ERROR] [${new Date().toISOString()}] ${message}`, error?.message || error || '');
        |                 ^
      7 |         if (error?.stack) console.error(error.stack);
      8 |     },
      9 |     warn: (message: string, context?: any) => {

      at Object.error (src/utils/logger.ts:6:17)
      at handleControllerError (src/controllers/authController.ts:12:12)
      at updateTheme (src/controllers/preferenceController.ts:56:16)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at next (node_modules/router/lib/route.js:157:13)
      at protect (src/routes/authRoutes.ts:17:9)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at next (node_modules/router/lib/route.js:157:13)
      at Route.dispatch (node_modules/router/lib/route.js:117:3)
      at handle (node_modules/router/index.js:435:11)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at node_modules/router/index.js:295:15
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Function.handle (node_modules/router/index.js:186:3)
      at router (node_modules/router/index.js:60:12)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at trimPrefix (node_modules/router/index.js:342:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/body-parser/lib/read.js:172:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

    console.error
      ZodError: [
        {
          "origin": "string",
          "code": "invalid_format",
          "format": "regex",
          "pattern": "/^#[0-9A-F]{6}$/i",
          "path": [
            "accentColor"
          ],
          "message": "Invalid hex color"
        }
      ]
          at updateTheme (/home/bytesage/campus-swap/backend/src/controllers/preferenceController.ts:42:49)
          at Layer.handleRequest (/home/bytesage/campus-swap/backend/node_modules/router/lib/layer.js:152:17)
          at next (/home/bytesage/campus-swap/backend/node_modules/router/lib/route.js:157:13)
          at protect (/home/bytesage/campus-swap/backend/src/routes/authRoutes.ts:17:9)
          at Layer.handleRequest (/home/bytesage/campus-swap/backend/node_modules/router/lib/layer.js:152:17)
          at next (/home/bytesage/campus-swap/backend/node_modules/router/lib/route.js:157:13)
          at Route.dispatch (/home/bytesage/campus-swap/backend/node_modules/router/lib/route.js:117:3)
          at handle (/home/bytesage/campus-swap/backend/node_modules/router/index.js:435:11)
          at Layer.handleRequest (/home/bytesage/campus-swap/backend/node_modules/router/lib/layer.js:152:17)
          at /home/bytesage/campus-swap/backend/node_modules/router/index.js:295:15
          at processParams (/home/bytesage/campus-swap/backend/node_modules/router/index.js:582:12)
          at next (/home/bytesage/campus-swap/backend/node_modules/router/index.js:291:5)
          at Function.handle (/home/bytesage/campus-swap/backend/node_modules/router/index.js:186:3)
          at router (/home/bytesage/campus-swap/backend/node_modules/router/index.js:60:12)
          at Layer.handleRequest (/home/bytesage/campus-swap/backend/node_modules/router/lib/layer.js:152:17)
          at trimPrefix (/home/bytesage/campus-swap/backend/node_modules/router/index.js:342:13)
          at /home/bytesage/campus-swap/backend/node_modules/router/index.js:297:9
          at processParams (/home/bytesage/campus-swap/backend/node_modules/router/index.js:582:12)
          at next (/home/bytesage/campus-swap/backend/node_modules/router/index.js:291:5)
          at /home/bytesage/campus-swap/backend/node_modules/body-parser/lib/read.js:172:5
          at AsyncResource.runInAsyncScope (node:async_hooks:214:14)
          at invokeCallback (/home/bytesage/campus-swap/backend/node_modules/raw-body/index.js:238:16)
          at done (/home/bytesage/campus-swap/backend/node_modules/raw-body/index.js:227:7)
          at IncomingMessage.onEnd (/home/bytesage/campus-swap/backend/node_modules/raw-body/index.js:287:7)
          at IncomingMessage.emit (node:events:519:28)
          at endReadableNT (node:internal/streams/readable:1698:12)
          at processTicksAndRejections (node:internal/process/task_queues:90:21)

       5 |     error: (message: string, error?: any) => {
       6 |         console.error(`[ERROR] [${new Date().toISOString()}] ${message}`, error?.message || error || '');
    >  7 |         if (error?.stack) console.error(error.stack);
         |                                   ^
       8 |     },
       9 |     warn: (message: string, context?: any) => {
      10 |         console.warn(`[WARN] [${new Date().toISOString()}] ${message}`, context ? JSON.stringify(context, null, 2) : '');

      at Object.error (src/utils/logger.ts:7:35)
      at handleControllerError (src/controllers/authController.ts:12:12)
      at updateTheme (src/controllers/preferenceController.ts:56:16)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at next (node_modules/router/lib/route.js:157:13)
      at protect (src/routes/authRoutes.ts:17:9)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at next (node_modules/router/lib/route.js:157:13)
      at Route.dispatch (node_modules/router/lib/route.js:117:3)
      at handle (node_modules/router/index.js:435:11)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at node_modules/router/index.js:295:15
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Function.handle (node_modules/router/index.js:186:3)
      at router (node_modules/router/index.js:60:12)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at trimPrefix (node_modules/router/index.js:342:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/body-parser/lib/read.js:172:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

PASS tests/uploads.test.ts
  â— Console

    console.log
      [dotenv@17.2.3] injecting env (6) from .env -- tip: ðŸ—‚ï¸ backup and recover secrets: https://dotenvx.com/ops

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: âš™ï¸  load multiple .env files with { path: ['.env.local', '.env'] }

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ðŸ”„ add secrets lifecycle management: https://dotenvx.com/ops

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.log
      [INFO] [2026-01-03T11:17:22.662Z] Creating Listing {
        "sellerId": "0e889f8e-b5a1-4742-bbea-8ee17de97af3",
        "title": "Textbook with Real Image"
      }

      at Object.info (src/utils/logger.ts:3:17)

    console.log
      [INFO] [2026-01-03T11:17:22.704Z] Listing Created Successfully {
        "listingId": "a11c642e-f919-4bbd-ab6f-1948ce6e9156"
      }

      at Object.info (src/utils/logger.ts:3:17)

    console.log
      [INFO] [2026-01-03T11:17:22.771Z] ID Documents Uploaded {
        "userId": "0e889f8e-b5a1-4742-bbea-8ee17de97af3",
        "verificationId": "8b4b322d-66b8-4291-b6c8-7ffda19ab115"
      }

      at Object.info (src/utils/logger.ts:3:17)

PASS tests/review.test.ts
  â— Console

    console.log
      [dotenv@17.2.3] injecting env (6) from .env -- tip: âš™ï¸  suppress all logs with { quiet: true }

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: âš™ï¸  specify custom .env file path with { path: '/custom/path/.env' }

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ðŸ‘¥ sync secrets across teammates & machines: https://dotenvx.com/ops

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.log
      [INFO] [2026-01-03T11:17:24.774Z] Review Submitted {
        "reviewerId": "a1b59272-1776-449b-b213-99613e2bcc82",
        "targetId": "d934b745-18cc-4d5e-b75c-ba7aaaefccfa",
        "rating": 5
      }

      at Object.info (src/utils/logger.ts:3:17)

    console.error
      [ERROR] [2026-01-03T11:17:24.794Z] SubmitReview Controller Error [
        {
          "origin": "number",
          "code": "too_big",
          "maximum": 5,
          "inclusive": true,
          "path": [
            "rating"
          ],
          "message": "Too big: expected number to be <=5"
        }
      ]

      4 |     },
      5 |     error: (message: string, error?: any) => {
    > 6 |         console.error(`[ERROR] [${new Date().toISOString()}] ${message}`, error?.message || error || '');
        |                 ^
      7 |         if (error?.stack) console.error(error.stack);
      8 |     },
      9 |     warn: (message: string, context?: any) => {

      at Object.error (src/utils/logger.ts:6:17)
      at handleControllerError (src/controllers/reviewController.ts:8:12)
      at submitReview (src/controllers/reviewController.ts:46:16)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at next (node_modules/router/lib/route.js:157:13)
      at protect (src/routes/reviewRoutes.ts:17:9)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at next (node_modules/router/lib/route.js:157:13)
      at Route.dispatch (node_modules/router/lib/route.js:117:3)
      at handle (node_modules/router/index.js:435:11)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at node_modules/router/index.js:295:15
      at param (node_modules/router/index.js:600:14)
      at param (node_modules/router/index.js:610:14)
      at processParams (node_modules/router/index.js:664:3)
      at next (node_modules/router/index.js:291:5)
      at Function.handle (node_modules/router/index.js:186:3)
      at router (node_modules/router/index.js:60:12)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at trimPrefix (node_modules/router/index.js:342:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at protect (src/routes/authRoutes.ts:17:9)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at trimPrefix (node_modules/router/index.js:342:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Function.handle (node_modules/router/index.js:186:3)
      at router (node_modules/router/index.js:60:12)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at trimPrefix (node_modules/router/index.js:342:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/body-parser/lib/read.js:172:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

    console.error
      ZodError: [
        {
          "origin": "number",
          "code": "too_big",
          "maximum": 5,
          "inclusive": true,
          "path": [
            "rating"
          ],
          "message": "Too big: expected number to be <=5"
        }
      ]
          at submitReview (/home/bytesage/campus-swap/backend/src/controllers/reviewController.ts:23:50)
          at Layer.handleRequest (/home/bytesage/campus-swap/backend/node_modules/router/lib/layer.js:152:17)
          at next (/home/bytesage/campus-swap/backend/node_modules/router/lib/route.js:157:13)
          at protect (/home/bytesage/campus-swap/backend/src/routes/reviewRoutes.ts:17:9)
          at Layer.handleRequest (/home/bytesage/campus-swap/backend/node_modules/router/lib/layer.js:152:17)
          at next (/home/bytesage/campus-swap/backend/node_modules/router/lib/route.js:157:13)
          at Route.dispatch (/home/bytesage/campus-swap/backend/node_modules/router/lib/route.js:117:3)
          at handle (/home/bytesage/campus-swap/backend/node_modules/router/index.js:435:11)
          at Layer.handleRequest (/home/bytesage/campus-swap/backend/node_modules/router/lib/layer.js:152:17)
          at /home/bytesage/campus-swap/backend/node_modules/router/index.js:295:15
          at param (/home/bytesage/campus-swap/backend/node_modules/router/index.js:600:14)
          at param (/home/bytesage/campus-swap/backend/node_modules/router/index.js:610:14)
          at processParams (/home/bytesage/campus-swap/backend/node_modules/router/index.js:664:3)
          at next (/home/bytesage/campus-swap/backend/node_modules/router/index.js:291:5)
          at Function.handle (/home/bytesage/campus-swap/backend/node_modules/router/index.js:186:3)
          at router (/home/bytesage/campus-swap/backend/node_modules/router/index.js:60:12)
          at Layer.handleRequest (/home/bytesage/campus-swap/backend/node_modules/router/lib/layer.js:152:17)
          at trimPrefix (/home/bytesage/campus-swap/backend/node_modules/router/index.js:342:13)
          at /home/bytesage/campus-swap/backend/node_modules/router/index.js:297:9
          at processParams (/home/bytesage/campus-swap/backend/node_modules/router/index.js:582:12)
          at next (/home/bytesage/campus-swap/backend/node_modules/router/index.js:291:5)
          at /home/bytesage/campus-swap/backend/node_modules/router/index.js:688:15
          at next (/home/bytesage/campus-swap/backend/node_modules/router/index.js:276:14)
          at protect (/home/bytesage/campus-swap/backend/src/routes/authRoutes.ts:17:9)
          at Layer.handleRequest (/home/bytesage/campus-swap/backend/node_modules/router/lib/layer.js:152:17)
          at trimPrefix (/home/bytesage/campus-swap/backend/node_modules/router/index.js:342:13)
          at /home/bytesage/campus-swap/backend/node_modules/router/index.js:297:9
          at processParams (/home/bytesage/campus-swap/backend/node_modules/router/index.js:582:12)
          at next (/home/bytesage/campus-swap/backend/node_modules/router/index.js:291:5)
          at Function.handle (/home/bytesage/campus-swap/backend/node_modules/router/index.js:186:3)
          at router (/home/bytesage/campus-swap/backend/node_modules/router/index.js:60:12)
          at Layer.handleRequest (/home/bytesage/campus-swap/backend/node_modules/router/lib/layer.js:152:17)
          at trimPrefix (/home/bytesage/campus-swap/backend/node_modules/router/index.js:342:13)
          at /home/bytesage/campus-swap/backend/node_modules/router/index.js:297:9
          at processParams (/home/bytesage/campus-swap/backend/node_modules/router/index.js:582:12)
          at next (/home/bytesage/campus-swap/backend/node_modules/router/index.js:291:5)
          at /home/bytesage/campus-swap/backend/node_modules/body-parser/lib/read.js:172:5
          at AsyncResource.runInAsyncScope (node:async_hooks:214:14)
          at invokeCallback (/home/bytesage/campus-swap/backend/node_modules/raw-body/index.js:238:16)
          at done (/home/bytesage/campus-swap/backend/node_modules/raw-body/index.js:227:7)
          at IncomingMessage.onEnd (/home/bytesage/campus-swap/backend/node_modules/raw-body/index.js:287:7)
          at IncomingMessage.emit (node:events:519:28)
          at endReadableNT (node:internal/streams/readable:1698:12)
          at processTicksAndRejections (node:internal/process/task_queues:90:21)

       5 |     error: (message: string, error?: any) => {
       6 |         console.error(`[ERROR] [${new Date().toISOString()}] ${message}`, error?.message || error || '');
    >  7 |         if (error?.stack) console.error(error.stack);
         |                                   ^
       8 |     },
       9 |     warn: (message: string, context?: any) => {
      10 |         console.warn(`[WARN] [${new Date().toISOString()}] ${message}`, context ? JSON.stringify(context, null, 2) : '');

      at Object.error (src/utils/logger.ts:7:35)
      at handleControllerError (src/controllers/reviewController.ts:8:12)
      at submitReview (src/controllers/reviewController.ts:46:16)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at next (node_modules/router/lib/route.js:157:13)
      at protect (src/routes/reviewRoutes.ts:17:9)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at next (node_modules/router/lib/route.js:157:13)
      at Route.dispatch (node_modules/router/lib/route.js:117:3)
      at handle (node_modules/router/index.js:435:11)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at node_modules/router/index.js:295:15
      at param (node_modules/router/index.js:600:14)
      at param (node_modules/router/index.js:610:14)
      at processParams (node_modules/router/index.js:664:3)
      at next (node_modules/router/index.js:291:5)
      at Function.handle (node_modules/router/index.js:186:3)
      at router (node_modules/router/index.js:60:12)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at trimPrefix (node_modules/router/index.js:342:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at protect (src/routes/authRoutes.ts:17:9)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at trimPrefix (node_modules/router/index.js:342:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Function.handle (node_modules/router/index.js:186:3)
      at router (node_modules/router/index.js:60:12)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at trimPrefix (node_modules/router/index.js:342:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/body-parser/lib/read.js:172:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

PASS tests/saved_items.test.ts
  â— Console

    console.log
      [dotenv@17.2.3] injecting env (6) from .env -- tip: ðŸ› ï¸  run anywhere with `dotenvx run -- yourcommand`

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ðŸ‘¥ sync secrets across teammates & machines: https://dotenvx.com/ops

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ðŸ” prevent building .env in docker: https://dotenvx.com/prebuild

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.log
      [INFO] [2026-01-03T11:17:26.710Z] Listing Saved {
        "userId": "cd1d961a-6185-47de-a8f2-7644c6466133",
        "listingId": "eb011bd6-c006-42d3-a5bf-8c7414ec263b"
      }

      at Object.info (src/utils/logger.ts:3:17)

    console.log
      [INFO] [2026-01-03T11:17:26.799Z] Listing Unsaved {
        "userId": "cd1d961a-6185-47de-a8f2-7644c6466133",
        "listingId": "eb011bd6-c006-42d3-a5bf-8c7414ec263b"
      }

      at Object.info (src/utils/logger.ts:3:17)

PASS tests/features.test.ts
  â— Console

    console.log
      [dotenv@17.2.3] injecting env (6) from .env -- tip: ðŸ” encrypt with Dotenvx: https://dotenvx.com

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ðŸ” prevent building .env in docker: https://dotenvx.com/prebuild

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: âš™ï¸  load multiple .env files with { path: ['.env.local', '.env'] }

      at _log (node_modules/dotenv/lib/main.js:142:11)

PASS tests/platform_analytics.test.ts
  â— Console

    console.log
      [dotenv@17.2.3] injecting env (6) from .env -- tip: âš™ï¸  write to custom object with { processEnv: myObject }

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: âš™ï¸  load multiple .env files with { path: ['.env.local', '.env'] }

      at _log (node_modules/dotenv/lib/main.js:142:11)

PASS tests/release.test.ts
  â— Console

    console.log
      [dotenv@17.2.3] injecting env (6) from .env -- tip: ðŸ”„ add secrets lifecycle management: https://dotenvx.com/ops

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ðŸ‘¥ sync secrets across teammates & machines: https://dotenvx.com/ops

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: âœ… audit secrets and track compliance: https://dotenvx.com/ops

      at _log (node_modules/dotenv/lib/main.js:142:11)


Test Suites: 20 passed, 20 total
Tests:       96 passed, 96 total
Snapshots:   0 total
Time:        43.656 s
Ran all test suites.
Jest did not exit one second after the test run has completed.

'This usually means that there are asynchronous operations that weren't stopped in your tests. Consider running Jest with `--detectOpenHandles` to troubleshoot this issue.
